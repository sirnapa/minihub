"use strict";angular.module("minihubApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngMessages","toastr","ui.router","satellizer"]).config(["$stateProvider","$urlRouterProvider","$authProvider",function(a,b,c){var d=["$q","$auth",function(a,b){var c=a.defer();return b.isAuthenticated()?c.reject():c.resolve(),c.promise}];a.state("main",{url:"/",controller:"MainCtrl",templateUrl:"views/main.html",resolve:{}}).state("users",{url:"/users",controller:"UsersCtrl",templateUrl:"views/users.html",resolve:{}}).state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl",resolve:{skipIfLoggedIn:d}}).state("logout",{url:"/logout",template:null,controller:"LogoutCtrl"}),b.otherwise("/"),c.github({clientId:"7572c1dd57c2465d817b",url:"http://localhost:3000/auth/github"})}]),angular.module("minihubApp").controller("MainCtrl",["$scope","$http","$location",function(a,b,c){var d=function(){a.user={},a.repos=[],a.error="",b.get("https://api.github.com/users/"+a.username).success(function(c){c.login&&(a.user=c,b.get("https://api.github.com/users/"+c.login+"/repos").success(function(b){a.repos=b}))}).error(function(){a.error="No se han encontrado datos para el usuario ingresado"})},e=c.search().user;e&&(a.username=e,d()),a.search=d}]),angular.module("minihubApp").controller("LoginCtrl",["$scope","$location","$auth","toastr",function(a,b,c,d){a.authenticate=function(a){c.authenticate(a).then(function(){d.success("You have successfully signed in with "+a+"!"),b.path("/")})["catch"](function(a){a.message?d.error(a.message):a.data?d.error(a.data.message,a.status):d.error(a)})}}]),angular.module("minihubApp").controller("LogoutCtrl",["$location","$auth","toastr",function(a,b,c){b.isAuthenticated()&&b.logout().then(function(){c.info("You have been logged out"),a.path("/")})}]),angular.module("minihubApp").controller("NavbarCtrl",["$scope","$auth",function(a,b){a.isAuthenticated=function(){return b.isAuthenticated()}}]),angular.module("minihubApp").controller("UsersCtrl",["$scope","$http",function(a,b){a.search=function(){a.users=[],a.error="",b.get("https://api.github.com/search/users?q="+a.username).success(function(b){b.items.length>0?a.users=b.items:a.error="No se han encontrado resultados."}).error(function(b){a.error=b.message})}}]),angular.module("minihubApp").run(["$templateCache",function(a){a.put("views/login.html",'<div class="container"> <div class="row"> <div class="center-form text-center"> <h2>Ingresar</h2> <br> <button class="btn btn-lg btn-primary btn-github" ng-click="authenticate(\'github\')"> <i class="fa fa-fw fa-github"></i> Iniciar sesi√≥n con GitHub </button> </div> </div> </div>'),a.put("views/main.html",'<h1>Buscar repositorios de un usuario</h1> <br> <div class="row"> <div class="col-sm-3 borde-derecho"> <p class="h1 text-center"> <i class="fa fa-5x fa-github"></i> </p> <h2> {{user.name}} </h2> <p class="text-muted"> {{user.login}} </p> <hr ng-if="user.login"> <ul class="fa-ul"> <li ng-if="user.company"> <i class="fa-li fa fa-users"></i> <span>{{user.company}}</span> </li> <li ng-if="user.location"> <i class="fa-li fa fa-map-marker"></i> <span>{{user.location}}</span> </li> <li ng-if="user.created_at"> <i class="fa-li fa fa-clock-o"></i> <span>{{user.created_at}}</span> </li> </ul> </div> <div class="col-sm-9"> <form class="form-horizontal" method="post" ng-submit="search()" name="searchForm"> <div class="col-sm-10"> <input type="text" class="form-control" name="username" ng-model="username" placeholder="Github username" required autofocus value="{{default}}"> </div> <div class="col-sm-2"> <button type="submit" class="btn btn-success btn-block" ng-disabled="searchForm.$invalid"> Buscar </button> </div> </form> <div class="clearfix"></div> <br> <div class="alert alert-danger" role="alert" ng-if="error"> {{error}} </div> <div class="panel panel-result" ng-repeat="repo in repos"> <div class="panel-body"> <div class="col-sm-8"> <a href="{{user.html_url}}"> <strong> {{repo.name}} </strong> </a> <p class="text-muted"> {{repo.description}} </p> </div> <div class="col-sm-3"> <i class="fa fa-fw fa-circle text-muted"></i> {{repo.language}} </div> <div class="col-sm-1"> <ul class="fa-ul text-muted"> <li> <i class="fa-li fa fa-star"></i> {{repo.stargazers_count}} </li> <li> <i class="fa-li fa fa-eye"></i> {{repo.watchers_count}} </li> <li> <i class="fa-li fa fa-code-fork"></i> {{repo.forks_count}} </li> </ul> </div> </div> </div> </div> </div>'),a.put("views/users.html",'<h1>Buscar usuarios</h1> <br> <div class="row"> <div class="col-sm-9 col-sm-offset-3"> <form class="form-horizontal" method="post" ng-submit="search()" name="searchForm"> <div class="col-sm-10"> <input type="text" class="form-control" name="username" ng-model="username" placeholder="Github username" required autofocus> </div> <div class="col-sm-2"> <button type="submit" class="btn btn-success btn-block" ng-disabled="searchForm.$invalid"> Buscar </button> </div> </form> <div class="clearfix"></div> <br> <div class="alert alert-danger" role="alert" ng-if="error"> {{error}} </div> <div class="panel panel-result" ng-repeat="user in users"> <div class="panel-body"> <div class="col-sm-2"> <a href="/#/?user={{user.login}}"> <img class="img-responsive github-avatar" src="{{user.avatar_url}}"> </a> </div> <div class="col-sm-8"> <a href="/#/?user={{user.login}}"> <strong> {{user.login}} </strong> </a> <p class="text-muted"> {{user.score}} </p> </div> <div class="col-sm-2"> <ul class="fa-ul text-muted"> <li> <a href="{{user.html_url}}?tab=repositories"> <i class="fa-li fa fa-code-fork"></i> Repositorios </a> </li> <li> <a href="{{user.html_url}}?tab=stars"> <i class="fa-li fa fa-star"></i> Estrellas </a> </li> <li> <a href="{{user.html_url}}/followers"> <i class="fa-li fa fa-user-circle"></i> Seguidores </a> </li> <li> <a href="{{user.html_url}}/following"> <i class="fa-li fa fa-user-circle-o"></i> Siguiendo </a> </li> </ul> </div> </div> </div> </div> </div>')}]);